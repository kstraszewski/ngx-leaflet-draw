{"version":3,"file":"ngx-leaflet-draw.js","sources":["../leaflet-draw/core/leaflet-draw.directive.js","../leaflet-draw/leaflet-draw.module.js"],"sourcesContent":["import { Directive, EventEmitter, Input, Output } from '@angular/core';\r\nimport * as L from 'leaflet';\r\nimport 'leaflet-draw';\r\nimport { LeafletDirective, LeafletDirectiveWrapper } from '@asymmetrik/ngx-leaflet';\r\nvar LeafletDrawDirective = /** @class */ (function () {\r\n    function LeafletDrawDirective(leafletDirective) {\r\n        this.drawOptions = null;\r\n        this.onCreate = new EventEmitter();\r\n        this.onDrawStart = new EventEmitter();\r\n        this.onDrawStop = new EventEmitter();\r\n        this.onDeleted = new EventEmitter();\r\n        this.onDeleteStart = new EventEmitter();\r\n        this.onDeleteStop = new EventEmitter();\r\n        this.onEdited = new EventEmitter();\r\n        this.onEditStart = new EventEmitter();\r\n        this.onEditStop = new EventEmitter();\r\n        this.leafletDirective = new LeafletDirectiveWrapper(leafletDirective);\r\n    }\r\n    LeafletDrawDirective.prototype.ngOnInit = function () {\r\n        var _this = this;\r\n        this.leafletDirective.init();\r\n        // Initialize the draw options (in case they weren't provided)\r\n        this.drawOptions = this.initializeDrawOptions(this.drawOptions);\r\n        // Create the control\r\n        this.drawControl = new L.Control.Draw(this.drawOptions);\r\n        // Pull out the feature group for convenience\r\n        this.featureGroup = this.drawOptions.edit.featureGroup;\r\n        // Add the control to the map\r\n        this.leafletDirective.getMap().addControl(this.drawControl);\r\n        // Register the main handler for events coming from the draw plugin\r\n        /*Create*/\r\n        if (this.onCreate.observers.length === 0) {\r\n            this.leafletDirective.getMap().on(L.Draw.Event.CREATED, function (e) {\r\n                var layer = e.layer;\r\n                _this.featureGroup.addLayer(layer);\r\n            });\r\n        }\r\n        else {\r\n            this.leafletDirective.getMap().on(L.Draw.Event.CREATED, function (e) {\r\n                _this.onCreate.emit(e);\r\n            });\r\n        }\r\n        if (this.onDrawStart.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.DRAWSTART, function (e) {\r\n                _this.onDrawStart.emit(e);\r\n            });\r\n        }\r\n        if (this.onDrawStop.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.DRAWSTOP, function (e) {\r\n                _this.onDrawStop.emit(e);\r\n            });\r\n        }\r\n        /*Edit*/\r\n        if (this.onEdited.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.EDITED, function (e) {\r\n                _this.onEdited.emit(e);\r\n            });\r\n        }\r\n        if (this.onEditStart.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.EDITSTART, function (e) {\r\n                _this.onEditStart.emit(e);\r\n            });\r\n        }\r\n        if (this.onEditStop.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.EDITSTOP, function (e) {\r\n                _this.onEditStop.emit(e);\r\n            });\r\n        }\r\n        /*Delete*/\r\n        if (this.onDeleted.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.DELETED, function (e) {\r\n                _this.onDeleted.emit(e);\r\n            });\r\n        }\r\n        if (this.onDeleteStart.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.DELETESTART, function (e) {\r\n                _this.onDeleteStart.emit(e);\r\n            });\r\n        }\r\n        if (this.onDeleteStop.observers.length !== 0) {\r\n            this.leafletDirective\r\n                .getMap()\r\n                .on(L.Draw.Event.DELETESTOP, function (e) {\r\n                _this.onDeleteStop.emit(e);\r\n            });\r\n        }\r\n    };\r\n    LeafletDrawDirective.prototype.ngOnDestroy = function () {\r\n        this.leafletDirective.getMap().removeControl(this.drawControl);\r\n    };\r\n    LeafletDrawDirective.prototype.ngOnChanges = function (changes) {\r\n        // No changes being handled currently\r\n    };\r\n    LeafletDrawDirective.prototype.initializeDrawOptions = function (options) {\r\n        // Ensure the options have a featureGroup\r\n        if (null == options) {\r\n            options = {\r\n                edit: null\r\n            };\r\n        }\r\n        if (null == options.edit) {\r\n            options.edit = {\r\n                featureGroup: null\r\n            };\r\n        }\r\n        if (null == options.edit.featureGroup) {\r\n            // No feature group was provided, so we're going to add it ourselves\r\n            options.edit.featureGroup = L.featureGroup();\r\n            this.leafletDirective.getMap().addLayer(options.edit.featureGroup);\r\n        }\r\n        return options;\r\n    };\r\n    LeafletDrawDirective.decorators = [\r\n        { type: Directive, args: [{\r\n                    selector: '[leafletDraw]'\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    LeafletDrawDirective.ctorParameters = function () { return [\r\n        { type: LeafletDirective, },\r\n    ]; };\r\n    LeafletDrawDirective.propDecorators = {\r\n        'drawOptions': [{ type: Input, args: ['leafletDrawOptions',] },],\r\n        'onCreate': [{ type: Output },],\r\n        'onDrawStart': [{ type: Output },],\r\n        'onDrawStop': [{ type: Output },],\r\n        'onDeleted': [{ type: Output },],\r\n        'onDeleteStart': [{ type: Output },],\r\n        'onDeleteStop': [{ type: Output },],\r\n        'onEdited': [{ type: Output },],\r\n        'onEditStart': [{ type: Output },],\r\n        'onEditStop': [{ type: Output },],\r\n    };\r\n    return LeafletDrawDirective;\r\n}());\r\nexport { LeafletDrawDirective };\r\n//# sourceMappingURL=leaflet-draw.directive.js.map","import { NgModule } from '@angular/core';\r\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\r\nimport { LeafletDrawDirective } from './core/leaflet-draw.directive';\r\nvar LeafletDrawModule = /** @class */ (function () {\r\n    function LeafletDrawModule() {\r\n    }\r\n    LeafletDrawModule.forRoot = function () {\r\n        return { ngModule: LeafletDrawModule, providers: [] };\r\n    };\r\n    LeafletDrawModule.decorators = [\r\n        { type: NgModule, args: [{\r\n                    imports: [\r\n                        LeafletModule\r\n                    ],\r\n                    exports: [\r\n                        LeafletDrawDirective\r\n                    ],\r\n                    declarations: [\r\n                        LeafletDrawDirective\r\n                    ]\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    LeafletDrawModule.ctorParameters = function () { return []; };\r\n    return LeafletDrawModule;\r\n}());\r\nexport { LeafletDrawModule };\r\n//# sourceMappingURL=leaflet-draw.module.js.map"],"names":["EventEmitter","LeafletDirectiveWrapper","L.Control","L.Draw","L.featureGroup","Directive","LeafletDirective","Input","Output","NgModule","LeafletModule"],"mappings":"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"}